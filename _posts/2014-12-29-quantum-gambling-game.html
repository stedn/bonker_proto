---
layout: post
title: Quantum Gambling Game
date: '2014-12-29T10:38:00.003-08:00'
author: Will Stedden
tags:
- Games
modified_time: '2015-02-18T18:31:25.793-08:00'
image: http://3.bp.blogspot.com/-WvR0IUoXD1Y/VKMHxZ7UxbI/AAAAAAAABMQ/_kAvN5N_chs/Screen%2BShot%2B2014-12-30%2Bat%2B2.14.01%2BPM.png
blogger_id: tag:blogger.com,1999:blog-40405577383217050.post-3084385476013776303
blogger_orig_url: https://www.bonkerfield.org/2014/12/quantum-gambling-game.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div class="separator" style="display:none;clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-WvR0IUoXD1Y/VKMHxZ7UxbI/AAAAAAAABMQ/_kAvN5N_chs/s1600/Screen%2BShot%2B2014-12-30%2Bat%2B2.14.01%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-WvR0IUoXD1Y/VKMHxZ7UxbI/AAAAAAAABMQ/_kAvN5N_chs/s400/Screen%2BShot%2B2014-12-30%2Bat%2B2.14.01%2BPM.png" /></a></div><p>Have you ever heard of quantum computing?  Know what makes it so special?  Well, many scientists (and their funding agencies) are hoping that quantum computing's secrets just might help <a href="http://www.inc.com/will-bourne/d-waves-dream-machine.html">get them rich</a>.  </p><p>I can't promise you that. But I can share this quantum gambling game I made with you.  Although it looks simple enough on the surface, this betting game actually reveals an interesting application of <a href="http://en.wikipedia.org/wiki/Quantum_computing">quantum computing</a>, the science turning "spooky" physics into solving real problems.  </p><p>I'll explain more about strategy and its relation to quantum algorithms below, but for now, try the game out!  Read below for more instructions.</p>  <br /><br /><div style="border:1px solid #AAA;border-radius:5px;width:500px;margin:auto;text-align:center"><h4 style="text-align:center"> Guess the Quantum Card! </h4><br /><div><img id="card1" border="0" style="width:38px;margin:10px;margin-bottom:0" src="http://cdn.shopify.com/s/files/1/0200/7616/products/aladdin-back-blue_large.png" /><img id="card2" border="0" style="width:38px;margin:10px;margin-bottom:0" src="http://cdn.shopify.com/s/files/1/0200/7616/products/aladdin-back-blue_large.png" /><img id="card3" border="0" style="width:38px;margin:10px;margin-bottom:0" src="http://cdn.shopify.com/s/files/1/0200/7616/products/aladdin-back-blue_large.png" /><img id="card4" border="0" style="width:38px;margin:10px;margin-bottom:0" src="http://cdn.shopify.com/s/files/1/0200/7616/products/aladdin-back-blue_large.png" /><img id="card5" border="0" style="width:38px;margin:10px;margin-bottom:0" src="http://cdn.shopify.com/s/files/1/0200/7616/products/aladdin-back-blue_large.png" /><img id="card6" border="0" style="width:38px;margin:10px;margin-bottom:0" src="http://cdn.shopify.com/s/files/1/0200/7616/products/aladdin-back-blue_large.png" /><img id="card7" border="0" style="width:38px;margin:10px;margin-bottom:0" src="http://cdn.shopify.com/s/files/1/0200/7616/products/aladdin-back-blue_large.png" /><img id="card8" border="0" style="width:38px;margin:10px;margin-bottom:0" src="http://cdn.shopify.com/s/files/1/0200/7616/products/aladdin-back-blue_large.png" /> </div> <input id="bet1" type="number" value="0" min="0" max="9" style="width:40px;margin:5px;font-size:12px"/><input id="bet2" type="number" value="0" min="0" max="9" style="width:40px;margin:5px;font-size:12px"/><input id="bet3" type="number" value="0" min="0" max="9" style="width:40px;margin:5px;font-size:12px"/><input id="bet4" type="number" value="0" min="0" max="9" style="width:40px;margin:5px;font-size:12px"/><input id="bet5" type="number" value="0" min="0" max="9" style="width:40px;margin:5px;font-size:12px"/><input id="bet6" type="number" value="0" min="0" max="9" style="width:40px;margin:5px;font-size:12px"/><input id="bet7" type="number" value="0" min="0" max="9" style="width:40px;margin:5px;font-size:12px"/><input id="bet8" type="number" value="0" min="0" max="9" style="width:40px;margin:5px;font-size:12px"/><div id="results" style="display:none">   </div><div><button id="paybut" style="display:none;font-size:1.2em;border-radius:5px" type="button" onclick="payup()">Trade Bets</button>  <button id="rebut" style="display:none;font-size:1.2em;border-radius:5px" type="button" onclick="regame()">Restart</button>  <button id="startbut" style="font-size:1.2em;border-radius:5px" type="button" onclick="startgame()">Place Bets</button><button id="swapbut" style="display:none;font-size:1.2em;border-radius:5px" type="button"  onclick="swap()">Redistribute</button><button id="endbut" style="display:none;font-size:1.2em;border-radius:5px" type="button"  onclick="endgame()">End Game</button></div></div><br /><br /><h4>Instructions</h4><p>The goal is to get the biggest bet you can onto the Ace of Spades, and to keep your bet off of the decoy cards.  But the trick is that during the game none of the cards are ever revealed to you. </p><p>You start the game by placing your initial bets on whatever cards you want.  </p> <p>After that, you have your choice of two moves, which you get to repeat until you decide you're done.</p><ol><li><b>Trade Bets</b>, meaning any money on the losing cards goes to the dealer, while the money on the winning card stays the same. </li> <li><b>Redistribute</b>, meaning you reverse all the bets around the average bet value.  So the dealer's money comes back to your side of the average, and vice versa. </li></ol><p>The redistribute move might seem confusing, so here's what it does graphically.</p> <div class="separator" style="border:2px solid #CCC; border-radius:5px;clear: both; text-align: center;"><h5 style="text-align:left;margin-left:20px;">How the Redistribute Move Works</h5><a href="http://3.bp.blogspot.com/-QihHMwqvsF8/VKLpaC0D5uI/AAAAAAAABL4/dbQ1ZZBLngk/s1600/mean_invert_grover.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-QihHMwqvsF8/VKLpaC0D5uI/AAAAAAAABL4/dbQ1ZZBLngk/s400/mean_invert_grover.gif" /></a></div> <p>During the redistribution, the dealer basically just moves the money around so that places where the money is on the dealer's side shift back to places where you still have money.  The math can get really complicated based on how many different bets there are going, but it boils down to just flipping the bets like in the graphic.</p><p>Throughout the game, all the money stays on the table.  But unfortunately for you, even though the money is changing hands, the dealer never tells you whether a given bet is yours or his on the table.  </p><p>Whenever you want, you can end the game.  At that point, the dealer checks how much money there is on the winning card and gives you back two times that amount.  He takes everything else.</p><h5 style="text-align:center;font-size:1.5em">So can you play?</h5><h5 style="text-align:center;font-size:1.2em">And can you figure out how to win... every time?</h5><br />     <br /><br />  <h4>Some Quantum Hints</h4><p>OK, so you're stumped.  Here are some hints.</p><p>I mentioned that it's possible to win <i>every</i> time&mdash;not just <i>most</i> of the time.  That should be a clue that the game doesn't rely on guessing.  </p> <p>A second clue to point out is that the Trade Bets operation "undoes itself."  That means that if you Trade Bets twice in a row, that's the same thing as not trading bets at all.  Take a minute to understand why that's true.</p> <p>Finally, I'll just tell you that repeating the Redistribute operation twice in a row isn't necessary to solve the problem.</p> <p>If you really don't have any idea what I'm talking about, check out <a onclick="expa()" href="#expa">this appendix</a> at the bottom of the page for more info.</p> <p style="text-align:center">Now give it another try.</p> <h4>Time out: how is quantum computing supposed to help me? </h4><p>For quantum computing, it's all about using fewer iterations to get the same job done.  A quantum algorithm aims to take a problem that would take billions of calculations on a classical computer and turn it into just hundreds of quantum calculations.  </p><p>For example, how long could it take you to find the card by guessing in the classical world?  If there are 8 cards you could have to guess 8 times.  But for the quantum algorithm on which this game is based, you would be guaranteed to find the card with just 2 guesses.  How does it do that?  Well, you'll have to read on to find out.</p><p>But with the 2 repetitions in mind, try the game out again.</p> <h4 id="howtowin">How to win the Game</h4><p>The way to win every time starts with eliminating all guessing.  What I mean by "no guessing" is that the initial configuration of bets must be the same for every card.  For example, you can just bet 1 on each card.</p> <div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-00cL8az7VaQ/VKMHxaKokFI/AAAAAAAABMI/VZN_gyUSRps/s1600/Screen%2BShot%2B2014-12-30%2Bat%2B2.13.20%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-00cL8az7VaQ/VKMHxaKokFI/AAAAAAAABMI/VZN_gyUSRps/s400/Screen%2BShot%2B2014-12-30%2Bat%2B2.13.20%2BPM.png" /></a></div> <p>After this we just start trying operations.  Because Redistributing on all 1s doesn't change the bet values, we know that we start by Trading Bets with the dealer and then we Redistribute.  We could redistribute over and over, but it turns out that won't help (although I don't know why. If you know, put it in the comments).   At this point, we just have to toggle back and forth between Trading and Redistributing operations.</p> <div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-pMJqB4nRif8/VKMHxSB8B6I/AAAAAAAABMM/e8VE4AhdiYs/s1600/Screen%2BShot%2B2014-12-30%2Bat%2B2.13.53%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-pMJqB4nRif8/VKMHxSB8B6I/AAAAAAAABMM/e8VE4AhdiYs/s400/Screen%2BShot%2B2014-12-30%2Bat%2B2.13.53%2BPM.png" /></a></div> <p>If we repeat those operations just the right number of times, our initial bets will work their way onto the winning card.  Now we just need to figure out how many times to repeat those moves.</p> <div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-WvR0IUoXD1Y/VKMHxZ7UxbI/AAAAAAAABMQ/_kAvN5N_chs/s1600/Screen%2BShot%2B2014-12-30%2Bat%2B2.14.01%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-WvR0IUoXD1Y/VKMHxZ7UxbI/AAAAAAAABMQ/_kAvN5N_chs/s400/Screen%2BShot%2B2014-12-30%2Bat%2B2.14.01%2BPM.png" /></a></div> <p>It turns out that the right number of repetitions is two. There's a reason that you have to repeat the pair of operations exactly twice, but I have to wait until after I explain the quantum mechanics to get to that.  For now, just try playing it again and show yourself that it actually does work.</p> <br /><h4>Quantum Information and Grover's Algorithm</h4><p>The two moves in the game are really just classical ways to describe more <a href="http://www.technologyreview.com/view/427174/einsteins-spooky-action-at-a-distance-paradox-older-than-thought/">"spooky"</a> operators from quantum computing.  And the money gained at the end of the game is analogous to your probability of finding a solution to the problem using a <a href="http://en.wikipedia.org/wiki/Brute-force_search">search algorithm</a>.  </p> <p>The Trading Bets operation would be called a Quantum Oracle, which by itself doesn't tell you which solution is right, but will confirm if you have the right answer at the end (by giving you money or taking it).  And the Redistribute move is a Grover Diffusion Operator, which essentially lets information about the correct answer "diffuse" from wrong answers.  (Note that this is way more complicated than I can explain, and to understand it for real you might need to do <a href="http://en.wikipedia.org/wiki/Quantum_computing">more reading</a>  (or even <a href="https://www.edx.org/course/quantum-mechanics-quantum-computation-uc-berkeleyx-cs-191x#.VKL7kAJBvQ">take a class</a>) on the subject.)</p> <div class="separator" style="clear: both; text-align: center;"><a href="http://upload.wikimedia.org/wikipedia/commons/a/ae/Grovers_algorithm.svg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://upload.wikimedia.org/wikipedia/commons/a/ae/Grovers_algorithm.svg" /></a></div> <p>When you repeat these two operations back to back, you end up performing <a href="http://en.wikipedia.org/wiki/Grover%27s_algorithm">Grover's Algorithm</a>, a technique proven to find the right information in a database (i.e. the cards).  Lov Grover (not <a href="http://muppet.wikia.com/wiki/Grover,_Messenger_of_Love">Love, Grover</a>) discovered this way of finding information back in the 90s.  He was working on a method to compute inverses by letting a quantum function (i.e. the dealer) perform operations (i.e. Trading Bets) that we couldn't see in the classical world (i.e. on our side of the betting table).  What was amazing about it was that it allowed you to perform the calculation many fewer times than you would using a classical (asking "Hey, is it that card?") approach.</p> <p>In the above game, you only need to repeat the procedure 2 times.  Whereas to find the card by guessing, you might have to try 8 times.  If you want to learn more about why it's exactly 2, I recommend <a href="http://arxiv.org/pdf/quant-ph/0504012.pdf">this in depth article</a> on the subject.</p> <p>(And to learn more about Grover's algorithm with cool visualizations, check out <a href="http://twistedoakstudios.com/blog/Post2644_grovers-quantum-search-algorithm">this tutorial</a> from <a href="http://twistedoakstudios.com/index.php">Twisted Oak Studios</a>.  </p><br/><h4 >So what's the big deal?</h4><p>In the end, what's really important about Grover's algorithm is that this isn't just a mathematical artifact.  The crazy laws of quantum mechanics somehow make it possible to perform these operation on real materials.  This means that it can be used to find real answers to questions that we can't solve fast enough with current computers.  </p> <p> Unfortunately, building quantum computers is turning out to be <a href="http://gizmodo.com/why-programming-a-quantum-computer-is-so-damn-hard-1188316086">insanely hard</a> so currently we can still do better with classical computers.  But hopefully <a href="http://www.wired.com/2014/10/quantum-computing-close/">someday soon</a>, a big breakthrough will make this technology possible.    <p>I hope this whetted your appetite to learn more about quantum computing.  Or at the least, it's a fun little puzzle to show your friends.</p> <br/><h4 >Playing more with quantum computers</h4><p>If you want to work more on this, feel free to check out my code.  For starters, you can find the javascript for the game on CodePen <a href="http://codepen.io/wmcfadd2/details/YPpqBr/">here</a>. If you're more interested about the quantum details, you can also check out <a href="https://github.com/lots-of-things/quantum-comp">this project</a> on Github that implements quantum computing gates as MATLAB matrix operations.</p>  .<br />.<br />.<br /> <div id="expa" style="cursor:pointer" onclick="expa()"><h4 >Appendix: Basic Primer on the Quantum Betting Game</h4><p>In case you need a little background about betting and guessing games, <a href="#expa">here's</a> a little Appendix that will help fill you in.  </p></div> <div id="appendix" style="display:none"><h5>Betting on the Ace of Spades</h5><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-oOyxvurv8bQ/VKIp7xHwj4I/AAAAAAAABLo/M6typvIQ15Y/s1600/johnny_automatic_card_trick.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-oOyxvurv8bQ/VKIp7xHwj4I/AAAAAAAABLo/M6typvIQ15Y/s640/johnny_automatic_card_trick.png" /></a></div><p>Imagine someone just dealt 8 cards on the table in front of you.  Now he asks you to bet $1 on which card is the Ace of Spades.  If you guess it right, he'll give you 7 more dollars ($8 for you).  If you guess wrong, he takes your $1 (-$1 for you).</p><h5>Do you take the bet?</h5><p>If you're acquainted with basic probability theory, you know that there's basically no point in playing this game.  That's because, on average, this game doesn't win or lose any money for either party. If you add up the possible outcomes you see that you have a 1/8 chance of winning $7 and a 7/8 chance of losing $1.  So when you add up the result after many trials, you'll find that both sides still has the exact same amount of money that they had at the beginning.</p><p> The decision on whether to play or not just depends on asking whether your expected value is positive (more background on expected values).  If you're playing a game where your expected value is positive, then over time you'll make more and more money.  (Just FYI, in actual casinos your expected value is <strong>always</strong> negative.)</p><h5>Now what if he changes the payout?</h5><p>In the original game above we said that the dealer only pays out $2 for every dollar bet on the winning card.  So is the expected value positive or negative now?  The answer is <strong>very negative</strong>.  Try the math out for yourself (In you need help try <a href="http://www.wikihow.com/Calculate-an-Expected-Value">this HowTo</a>).  <h5>A Little Change of Rules</h5><p>Now suppose the dealer let's you divide your $1 across as many cards as you want.  If you get it right, he'll pay you $8 times whatever you bet on that guess.  Now does it make more sense to play?</p><p>In fact, it doesn't.  The game hasn't changed at all, and if you play many times you'll see that on average both sides still keep the same amount of money.</p> <h5>When things get interesting</h5><p>It turns out the dealer has just been toying with you up to now.  He already knew that the game he'd proposed was just silly, but he was just prepping you to play his real game.</p><p>Now he introduces our <i>special</i> rules: trade your bets or redistribute the money.  Now things are different because in this game you can actually get information about which card is the right one.</p>   <p>There is an optimal strategy that will win almost double your money every time, but the sequence of operations is more complex.  At this point you can go back up to understand <a onclick="expa()" href="#howtowin">How to Win the Game</a></p> </div><br /></div> <script type="text/javascript">function expa() { if(document.getElementById("appendix").style.display=="inline"){   document.getElementById("appendix").style.display="none" }else{   document.getElementById("appendix").style.display="inline"; } } </script><script type="text/javascript">var total = 0; var bets =[]; var index; var nrm; var tog; function startgame() {   document.getElementById("startbut").style.display="none";   document.getElementById("paybut").style.display="inline";   document.getElementById("swapbut").style.display="inline";   document.getElementById("endbut").style.display="inline";   document.getElementById("bet1").readOnly="true";   document.getElementById("bet2").readOnly="true";   document.getElementById("bet3").readOnly="true";   document.getElementById("bet4").readOnly="true";   document.getElementById("bet5").readOnly="true";   document.getElementById("bet6").readOnly="true";   document.getElementById("bet7").readOnly="true";   document.getElementById("bet8").readOnly="true";   bets[0]=document.getElementById("bet1").value;   bets[1]=document.getElementById("bet2").value;   bets[2]=document.getElementById("bet3").value;   bets[3]=document.getElementById("bet4").value;   bets[4]=document.getElementById("bet5").value;   bets[5]=document.getElementById("bet6").value;   bets[6]=document.getElementById("bet7").value;   bets[7]=document.getElementById("bet8").value;   index = Math.floor((Math.random() * 8))   nrm = 0;   tog = 0;   for (i = 0; i < bets.length; i++) {     nrm = nrm+Math.pow(bets[i],2);     tog = tog+Math.abs(bets[i]);    }   nrm = Math.sqrt(nrm)   for (i = 0; i < bets.length; i++) {     bets[i] = bets[i]/nrm;   } }  function payup() {   for (i = 0; i < bets.length; i++) {     if(i!=index)       bets[i] = -bets[i];   }   refresh(); }  function swap() {   avg = 0;   for (i = 0; i < bets.length; i++) {       avg = avg + 1*bets[i];   }   avg = avg/8;   for (i = 0; i < bets.length; i++) {       bets[i] = 2*avg-bets[i];   }   refresh(); }  function refresh() {   sm = 0;   for (i = 0; i < bets.length; i++) {       sm = sm+Math.abs(bets[i]);   }   if(sm>0){     scl = tog/sm;   }else{     scl=1;   }   document.getElementById("bet1").value=Math.abs(scl*bets[0]);   document.getElementById("bet2").value=Math.abs(scl*bets[1]);   document.getElementById("bet3").value=Math.abs(scl*bets[2]);   document.getElementById("bet4").value=Math.abs(scl*bets[3]);   document.getElementById("bet5").value=Math.abs(scl*bets[4]);   document.getElementById("bet6").value=Math.abs(scl*bets[5]);   document.getElementById("bet7").value=Math.abs(scl*bets[6]);   document.getElementById("bet8").value=Math.abs(scl*bets[7]);    }  function endgame(){   val = 0;    for (i = 0; i < bets.length; i++) {     if(i!=index){       val = val -Math.abs(bets[i]);     }else{       val = val + 2*Math.abs(bets[i]);     }   }   sm = 0;   for (i = 0; i < bets.length; i++) {       sm = sm+Math.abs(bets[i]);   }   scl = tog/sm;   val = val*scl;   total = total + val   if(val>0){     document.getElementById("results").innerHTML="Game over.  You won $"+val.toFixed(2);   } else{     document.getElementById("results").innerHTML="Game over.  You lost $"+(-val).toFixed(2);   }   if(total>0){ document.getElementById("results").innerHTML=document.getElementById("results").innerHTML+". <br /> Total Winnings= $"+total.toFixed(2);   } else{      document.getElementById("results").innerHTML=document.getElementById("results").innerHTML+". <br /> Total Winnings= -$"+-total.toFixed(2);   }   document.getElementById("results").style.display="inline";   document.getElementById("rebut").style.display="inline";   document.getElementById("paybut").style.display="none";   document.getElementById("swapbut").style.display="none";   document.getElementById("endbut").style.display="none";   document.getElementById("card"+(index+1)).src="http://upload.wikimedia.org/wikipedia/commons/e/e2/Aceofspades.png";    }  function regame() {   document.getElementById("card"+(index+1)).src="http://cdn.shopify.com/s/files/1/0200/7616/products/aladdin-back-blue_large.png";   document.getElementById("rebut").style.display="none";   document.getElementById("results").style.display="none";   document.getElementById("startbut").style.display="inline";   bets = [0,0,0,0,0,0,0,0];   refresh();   document.getElementById("bet1").readOnly="";   document.getElementById("bet2").readOnly="";   document.getElementById("bet3").readOnly="";   document.getElementById("bet4").readOnly="";   document.getElementById("bet5").readOnly="";   document.getElementById("bet6").readOnly="";   document.getElementById("bet7").readOnly="";   document.getElementById("bet8").readOnly=""; }  </script>