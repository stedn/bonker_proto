---
layout: post
title: Timeline Streamgraph from Google Sheets Data
date: '2020-05-10'
author: will stedden
tags:
- design
- code
image: /assets/images/2020/twitter_hipster.gif
---

<p>
    I've made a new kind of visualization called a Timeline Streamgraph.  It is just a modification of a standard streamgraph, flipped vertically to evoke the way we experience online media "timelines." Although a standard streamgraph can convey the same information, having to scroll down for older information tries to remind the viewer that the data is still being generated "in front" of them.
</p>

<p>
    As an example, I generated this figure of political ad spend on Google Ads.
</p>

<img src=""/>

<p>
    The coolest part of this visualization is that it's pulling directly from a Google Sheet. This means that I can update the data in real-time from anywhere by just copy and pasting the new data into the sheet.
</p>

<p>
    I'd like to see how others can use this viz so I've made the code very easy to fork and written a tutorial below so you can try it out.
</p>

<h3>How to Make a Timeline Streamgraph</h3>
<p>
    To replicate this figure with your own data you just need to
</p>

<ul>
<li>Fork <a href="">this codepen</a> or <a href="">this gist</a></li>
<li>Put data into a Google Sheet</li>
<li>Add the Google Sheet key to the code</li>
</ul>

<h4>Fork a gist or codepen</h4>

<p>I've made the code available on gist or on codepen so you can do whatever's easiest for you.</p>


<h5>Fork from codepen</h5>

<p>If you have a codepen account, you can view <a href="">this pen</a> and click "Fork" in the bottom right corner to make a copy that you can edit.</p>

<h5>Fork a gist</h5>
<p>
    If you have a Github account you can view <a href="">this gist</a> and "fork" a copy of it that will make it editable by you.  When you do this the code will be moved to
</p>

<pre>
https://gist.github.com/GITHUB_USERNAME/ID_OF_PROJECT
</pre>

<p>
    If you want to view your visualization you can use the amazing bl.ocks.org from Mike Bostock.  Just go to the following URL, using the same <code>GITHUB_USERNAME</code> and <code>ID_OF_PROJECT</code> that you see for your gist.
</p>
<pre>
https://bl.ocks.org/GITHUB_USERNAME/ID_OF_PROJECT
</pre>
<p>
    You should see an exact copy of my original vizualization (though you may have to wait a second for bl.ocks.org to fetch your code from gist.github).  Next you just need to use your own data.
</p>


<h4>Putting Data in a Google Sheet</h4>
<p>
    The viz just pulls from any published Google Sheet.  It looks for data in three columns in the following format and headings.
</p>

<img src=""/>

<p>
    For this demo, I wrote a query to get political ad spend from Google Ads data on BigQuery.  But, keep in mind, you can use any data you want as long as it follows the <code>key</code>, <code>date</code>, <code>value</code> format.
</p>


<p>

</p>


<h4>Connect D3 viz to Google Sheet</h4>
<p>
    At the top of the file there is a variable named "google_sheet_key." Fill that in with the corresponding key from your published google sheet.  You can see the key directly in the url on the edit page.
</p>

<img src=""/>

<p>
    If you're using Codepen, then the page should update right away with your new data.  If you are using gist you'll need to save the gist, and wait a few mintues for the changes to propagate to bl.ocks.org.
</p>


<h5>Bonus: Add custom colors</h5>
<p>
    I've also added a way to specify the colors from the same Google Sheet. You just need to add a second sheet with a column for <code>key</code> and a column for <code>color</code>. You need to have one color for every key on the first sheet. Any key that isn't included will show up black. Also, make sure that you don't change the order of the sheets.
</p>


<h4>Example uses</h4>
<p>
    I'm very curious what other uses people come up with for this viz.  If you try something out, please let me know and I'll a link to it here.
</p>

<ul>
    <li><a href="">political ad spend 2020</a> - example from this blog post</li>
    <li><a href="">will.stedden project history</a> - visual curriculum vitae that shows all the projects I've worked on concurrently over the past few years</li>
</ul>