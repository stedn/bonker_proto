<!DOCTYPE html><html lang="en"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>The Barbie Hadoop Cluster (Multi-Node Cluster) | bonkerfield</title><meta name="description" content="personal information identity spacetime map"><meta itemprop="name" content="Will Stedden"><meta itemprop="description" content="personal information identity spacetime map"><meta itemprop="image" content="http://2.bp.blogspot.com/-XGwAxKreBtw/VbWKR9SptdI/AAAAAAAAEHU/FgdjpgyQkKM/CAM00240.jpg"><meta property="og:url" content="https://bonkerfield.org/2015/07/the-barbie-hadoop-cluster-multi-node/"><meta property="og:type" content="website"><meta property="og:title" content="The Barbie Hadoop Cluster (Multi-Node Cluster) | bonkerfield"><meta property="og:site_name" content="bonkerfield"><meta property="og:description" content="personal information identity spacetime map"><meta property="og:image" content="http://2.bp.blogspot.com/-XGwAxKreBtw/VbWKR9SptdI/AAAAAAAAEHU/FgdjpgyQkKM/CAM00240.jpg"><meta property="twitter:url" content="https://bonkerfield.org/2015/07/the-barbie-hadoop-cluster-multi-node/"><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:title" content="The Barbie Hadoop Cluster (Multi-Node Cluster) | bonkerfield"><meta property="twitter:site" content="bonkerfield"><meta property="twitter:description" content="personal information identity spacetime map"><meta property="twitter:creator" content="@bonkerfield"><meta property="twitter:image" content="http://2.bp.blogspot.com/-XGwAxKreBtw/VbWKR9SptdI/AAAAAAAAEHU/FgdjpgyQkKM/CAM00240.jpg"><link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico"><link rel="stylesheet" href="/assets/css/app.min.css"><link rel="alternate" type="application/rss+xml" title="bonkerfield" href="/feed.xml"><link rel="canonical" href="/2015/07/the-barbie-hadoop-cluster-multi-node/"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-132451521-2"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-132451521-2'); </script></head><body id="the-barbie-hadoop-cluster-multi-node-cluster" class="post-layout"><header class="header"> <a class="header__title" href="/">bonkerfield</a><nav><ul class="header__list"><li><a href="/things">things</a></li><li><a href="/qmb">doings</a></li><li><a href="https://viewfoil.bonkerfield.org/"><img src="/assets/images/main/viewfoil_ico.svg"/></a></li><li><span class="popup__open"><i class="fa fa-envelope"></i></span></li><li><a href="/search"><i class="fa fa-search"></i></a></li></ul></nav></header><main class="bonk"><div class="post"><article class="h-entry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting"><div class="post__header section-padding-half"><div class="grid-small"><h2 itemprop="name headline p-name">The Barbie Hadoop Cluster (Multi-Node Cluster)</h2><time class="post__date dt-published" datetime="2015-07-26T00:00:00-07:00" itemprop="datePublished">2015·07·26</time><p class="post__date p-summary"></p></div></div><div class="post__content section-padding"><div class="grid"><div class="e-content" id="markdown" itemprop="articleBody"><p> I've finally finished the Barbie Hadoop Cluster! It's been several months since I <a href="/2015/01/the-barbie-hadoop-cluster-stage-1.html">started the project</a>, but after the hiatus I was ready to come back and get it finished.</p><img border="0" src="http://2.bp.blogspot.com/-XGwAxKreBtw/VbWKR9SptdI/AAAAAAAAEHU/FgdjpgyQkKM/s1600/CAM00240.jpg" title=" "/><p> Due to space limitations in our apartment, the stack of 9 Dell PCs is also being used as a TV/monitor stand. They're connected through a switch and all the extra ports on my roouter at the moment. Hopefully at <a href="http://www.artificechicago.org/">her permanent home</a>, Barbie will look a little more at ease.</p><h4>Setting Barbie Up</h4><p> The beginning of the procedure for the setup is basically exactly the same as I described in my <a href="http://www.makeloft.org/2015/01/the-barbie-hadoop-cluster-stage-1.html">previous post</a>, except for a change in the configuration files in the <a href="https://github.com/lots-of-things/hadoop-compiled">associated github project</a>. Pretty much the entirety of the hadoop setup on each computer was accomplished simply with the folowing command.<p><pre><br/>sudo git clone https://github.com/lots-of-things/hadoop-compiled.git /usr/local/hadoop<br/></pre><p> This is followed by changing permissions and adding a few directories to the $PATH by modifiying .bashrc.<p><pre><br/>sudo chown -R doopy:hadoop /usr/local/hadoop<br/>cat /usr/local/addToBash &gt;&gt; ~/.bashrc<br/></pre><p> This had to be done on each of the seven working machines. They each had different RAM and hard disk amounts, with skipper and stacie being the best and barbie and ken being the worst.</p><img border="0" src="http://3.bp.blogspot.com/-qNgeAOJanSY/VbWUclEdoeI/AAAAAAAAEHw/WLnnP2yBb70/s1600/CAM00241.png" title=" "/><p> I changed the /etc/hosts on every machine so that each machine could recognize each other by name.</p><pre><br/>10.0.0.9        barbie<br/>10.0.0.10       kelly<br/>10.0.0.13       skipper<br/>10.0.0.14       stacie<br/>10.0.0.16       ken<br/>10.0.0.17       christie<br/>10.0.0.18       midge<br/></pre><p> I decided to make skipper the master, Each machine needs to let the master connect by ssh without a password so I copied Skipper's rsa key made in the initial setup using</p><pre><br/>ssh-copy-id -i ~/.ssh/id_rsa.pub remote-host<br/></pre><p> Where remote-host had to be changed to every machine I wanted to connect to. Finally, skipper's slaves file (etc/hadoop/slaves) needed to have each machine added to it (including herself so she would do some work too instead of just running as the NameNode).</p><pre><br/>barbie<br/>kelly<br/>skipper<br/>stacie<br/>ken<br/>christie<br/>midge<br/></pre><h4>In all honesty...</h4><p> I screwed this up about a dozen times before getting it to work, but every mistake was something well-documented with solutions on the web. The best trick I learned was to delete the datanode temporary file on each machine whenever I screwed things up. In my setup that would be done like this.</p><pre><br/>rm -r /usr/local/hadoop/datanode<br/></pre><h4>And Finally</h4><p> I was finally able to load a few documents into the hdfs and run the wordcount on them across all machines. Overall, I feel extremely satisfied getting this done finally (though I've got a much more <a href="http://spark.apache.org/">sophisticated system</a> at my disposal at the cluster <a href="https://rcc.uchicago.edu/">where I work</a>). Now I'm just getting ready to try it out on one of my pet projects!</p><br/></p></p></p></p></div><ul class="post__social"><li><a href="https://www.facebook.com/sharer/sharer.php?u=https://bonkerfield.org/2015/07/the-barbie-hadoop-cluster-multi-node/" target="_blank"><i class="fa fa-facebook"></i></a></li><li><a href="https://twitter.com/intent/tweet?&text=The Barbie Hadoop Cluster (Multi-Node Cluster)+https://bonkerfield.org/2015/07/the-barbie-hadoop-cluster-multi-node/+by+Will Stedden" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?mini=true&source=The Barbie Hadoop Cluster (Multi-Node Cluster)&summary=&url=https://bonkerfield.org/2015/07/the-barbie-hadoop-cluster-multi-node/" target="_blank"><i class="fa fa-linkedin"></i></a></li><li><a href="https://www.stumbleupon.com/badge/?url=https://bonkerfield.org/2015/07/the-barbie-hadoop-cluster-multi-node/" target="_blank"><i class="fa fa-stumbleupon"></i></a></li><li><a href="https://www.reddit.com/submit?url=https://bonkerfield.org/2015/07/the-barbie-hadoop-cluster-multi-node/" target="_blank"><i class="fa fa-reddit-alien"></i></a></li><li><a href="https://www.tumblr.com/share/link?url=https://bonkerfield.org/2015/07/the-barbie-hadoop-cluster-multi-node/" target="_blank"><i class="fa fa-tumblr"></i></a></li><li><a href="https://www.pinterest.com/pin/create/link/?description=&media=http://2.bp.blogspot.com/-XGwAxKreBtw/VbWKR9SptdI/AAAAAAAAEHU/FgdjpgyQkKM/CAM00240.jpg&url=https://bonkerfield.org/2015/07/the-barbie-hadoop-cluster-multi-node/" target="_blank"><i class="fa fa-pinterest"></i></a></li></ul></div></div><div class="section-padding--none"><div class="grid"><hr class="sep" /></div></div><div class="section-padding"><div class="grid-small p-author h-card"> <span class="post__author">Posted by <a class="p-name u-url" href="http://hellowill.bonkerfield.org" title="More By Will Stedden">Will Stedden</a></span><p class="post__bio"></p></div></div></article></div><section class="related section-padding"><div class="grid-xlarge"><h2 class="related__title">Related</h2><div class="related__container"><article class="related__post"> <a class="related__link" href="https://bonkerfield.org/2020/02/wuhan-virus-model/"><figure class="related__img"> <img src="/assets/images/2020/wuhan_overview_im.png" alt="Modeling whether an outbreak of COVID-19 virus will hit San Francisco" /></figure><div><h2 class="related__text">Modeling whether an outbreak of COVID-19 virus will hit San Francisco</h2></div></a></article><article class="related__post"> <a class="related__link" href="https://bonkerfield.org/2019/06/google-analytics-for-scrolling-on/"><figure class="related__img"> <img src="https://1.bp.blogspot.com/-BN1Su8VptwM/XfGCDzfGpGI/AAAAAAAAFLQ/D5ZMotAq5qso7tUPfbzc4U1LJCPwS2bYwCLcBGAsYHQ/Screenshot%2Bfrom%2B2019-12-11%2B15-47-15.png" alt="Google Analytics for Scrolling on a Static Website (or Google Analytics is Creepy)" /></figure><div><h2 class="related__text">Google Analytics for Scrolling on a Static Website (or Google Analytics is Creepy)</h2></div></a></article><article class="related__post"> <a class="related__link" href="https://bonkerfield.org/2019/04/visualizing-shared-budgets-and-dividing/"><figure class="related__img"> <img src="https://1.bp.blogspot.com/-_tf3KY6IKew/XJsCuBf0TGI/AAAAAAAADmg/hP2k6zaGSokoPBK_4Vhn2Svv2bjpIdz1wCLcBGAs/Screen%2BShot%2B2019-03-26%2Bat%2B9.57.17%2BPM.png" alt="Visualizing shared budgets and dividing up household expenses fairly" /></figure><div><h2 class="related__text">Visualizing shared budgets and dividing up household expenses fairly</h2></div></a></article></div></div></section></main><footer class="footer section-padding"><div class="grid"><div class="subscribe" id="subscribe"><div class="subscribe__container"> <span class="subscribe__title">Subscribe</span><p class="subscribe__text">Get an update when I post new content.</p><form method="POST" action="https://bonkerfield.us4.list-manage.com/subscribe/post-json?u=68d1146ea8fe327def203f254&amp;id=e88ba623c5&amp;c=?" id="mc-signup" name="mc-embedded-subscribe-form" novalidate><div style="position: absolute; left: -5000px;" aria-hidden="true"> <input type="text" name="b_68d1146ea8fe327def203f254_e88ba623c5" tabindex="-1" value=""></div><div class="form-group"> <input id="mce-EMAIL" type="email" name="EMAIL" placeholder="Email Address"></div><div class="form__btn"> <input id="mc-submit" type="submit" value="Sign Up" name="subscribe"></div></form><p class="subscribe__error hidden"></p></div></div><hr class="sep--white"/><div class="footer__container"><ul class="footer__social"><li><a href="https://twitter.com/bonkerfield" rel="me" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="https://www.instagram.com/bonkerfield/" rel="me" target="_blank"><i class="fa fa-instagram"></i></a></li><li><a href="https://www.linkedin.com/in/willstedden" rel="me" target="_blank"><i class="fa fa-linkedin"></i></a></li><li><a href="https://github.com/stedn" rel="me" target="_blank"><i class="fa fa-github"></i></a></li><li><a href="https://codepen.io/stedn/" rel="me" target="_blank"><i class="fa fa-codepen"></i></a></li><li><a href="https://www.reddit.com/user/bonkerfield" rel="me" target="_blank"><i class="fa fa-reddit-alien"></i></a></li></ul><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank"> <input type="hidden" name="cmd" value="_donations" /> <input type="hidden" name="business" value="3LHDHWRBWMGZA" /> <input type="hidden" name="item_name" value="Help Fund the Quantum Multiverse Bifurcator" /> <input type="hidden" name="currency_code" value="USD" /> <input type="submit" value="donate" name="submit" style="width:15%;min-width:70px;"> <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" /> </form><div class="posts__pagination"> <span>All content on this blog is free to use under a creative commons <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a> license</span></div></div></div></footer><section class="contact popup"><div class="popup__close"><div class="popup__exit"></div></div><div class="contact__container popup__container"><div class="contact__img"><figure class="absolute-bg" style="background-image: url(/assets/images/2020/big_bonkerfield.png);"></figure></div><div class="contact__content"><div class="contact__mast section-padding--half"><div class="grid"><h2>Contact</h2></div></div><div class="section-padding--none"><hr class="sep"/></div><div class="contact__form section-padding--half"><div class="grid-xlarge"> <form id="form" class="form" action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSctE1VauB_r8xR0tsfPas21pTUqKg-5vC8zXgl_eRjJW2FP_g/formResponse" method="POST"><div class="form__subcontainer"><div> <label for="form-first-name">first name</label> <input type="text" name="entry.1565830609" id="form-first-name" required></div><div> <label for="form-last-name">last name</label> <input type="text" name="entry.1397370877" id="form-last-name" required></div></div><div> <label for="form-email">email</label> <input type="email" name="entry.644994945" id="form-email" required></div><div> <label for="form-message">message</label> <textarea name="entry.918842698" id="form-message" rows="3"></textarea></div><div class="form__submit"><div class="form__btn"> <input type="submit" value="Send"></div></div><p class="form__message"></p></form></div></div></div></div></section><script src="/assets/js/app.min.js"></script> <script> (function() { var links = document.getElementsByTagName('a'); for (var i = 0; i < links.length; i++) { if (/^(http?:)?\/\//.test(links[i].getAttribute('href'))) { links[i].target = '_blank'; } } })(); </script></body></html>
  