<!DOCTYPE html><html lang="en"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>The Barbie Hadoop Cluster (Multi-Node Cluster) | bonkerfield</title><meta name="description" content="a bonkerfield is just too much"><meta itemprop="name" content="Will Stedden"><meta itemprop="description" content="a bonkerfield is just too much"><meta itemprop="image" content="http://2.bp.blogspot.com/-XGwAxKreBtw/VbWKR9SptdI/AAAAAAAAEHU/FgdjpgyQkKM/CAM00240.jpg"><meta property="og:url" content="https://bonkerfield.org/2015/07/26/the-barbie-hadoop-cluster-multi-node/"><meta property="og:type" content="website"><meta property="og:title" content="The Barbie Hadoop Cluster (Multi-Node Cluster) | bonkerfield"><meta property="og:site_name" content="bonkerfield"><meta property="og:description" content="a bonkerfield is just too much"><meta property="og:image" content="http://2.bp.blogspot.com/-XGwAxKreBtw/VbWKR9SptdI/AAAAAAAAEHU/FgdjpgyQkKM/CAM00240.jpg"><meta name="twitter:url" content="https://bonkerfield.org/2015/07/26/the-barbie-hadoop-cluster-multi-node/"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="The Barbie Hadoop Cluster (Multi-Node Cluster) | bonkerfield"><meta name="twitter:site" content="bonkerfield"><meta name="twitter:description" content="a bonkerfield is just too much"><meta name="twitter:creator" content="@willstedden"><meta property="twitter:image" content="http://2.bp.blogspot.com/-XGwAxKreBtw/VbWKR9SptdI/AAAAAAAAEHU/FgdjpgyQkKM/CAM00240.jpg"><link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico"><link rel="stylesheet" href="/assets/css/app.min.css"><link rel="alternate" type="application/rss+xml" title="bonkerfield" href="/feed.xml"><link rel="canonical" href="/2015/07/26/the-barbie-hadoop-cluster-multi-node/"></head><body id="the-barbie-hadoop-cluster-multi-node-cluster" class="post-layout"><header class="header"> <a class="header__title" href="https://bonkerfield.org/">bonkerfield</a><nav><ul class="header__list"><li><a href="/">Things</a></li><li><a href="/about">Reasons</a></li><li><span class="popup__open">Contact</span></li></ul></nav></header><main class="bonk"><div class="post"><article itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting"><div class="post__header section-padding--double"><div class="grid-small"><h2 itemprop="name headline">The Barbie Hadoop Cluster (Multi-Node Cluster)</h2><time class="post__date" datetime="2015-07-26T18:32:00-07:00" itemprop="datePublished">26 Jul 2015</time></div></div><div class="post__content section-padding"><div class="grid"><div id="markdown" itemprop="articleBody"><div dir="ltr" style="text-align: left;" trbidi="on"><p> I've finally finished the Barbie Hadoop Cluster! It's been several months since I <a href="/2015/01/the-barbie-hadoop-cluster-stage-1.html">started the project</a>, but after the hiatus I was ready to come back and get it finished.</p><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-XGwAxKreBtw/VbWKR9SptdI/AAAAAAAAEHU/FgdjpgyQkKM/s1600/CAM00240.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-XGwAxKreBtw/VbWKR9SptdI/AAAAAAAAEHU/FgdjpgyQkKM/s400/CAM00240.jpg" /></a></div><p> Due to space limitations in our apartment, the stack of 9 Dell PCs is also being used as a TV/monitor stand. They're connected through a switch and all the extra ports on my roouter at the moment. Hopefully at <a href="http://www.artificechicago.org/">her permanent home</a>, Barbie will look a little more at ease.</p><h4>Setting Barbie Up</h4><p> The beginning of the procedure for the setup is basically exactly the same as I described in my <a href="http://www.makeloft.org/2015/01/the-barbie-hadoop-cluster-stage-1.html">previous post</a>, except for a change in the configuration files in the <a href="https://github.com/lots-of-things/hadoop-compiled">associated github project</a>. Pretty much the entirety of the hadoop setup on each computer was accomplished simply with the folowing command.<p><pre><br />sudo git clone https://github.com/lots-of-things/hadoop-compiled.git /usr/local/hadoop<br /></pre><p> This is followed by changing permissions and adding a few directories to the $PATH by modifiying .bashrc.<p><pre><br />sudo chown -R doopy:hadoop /usr/local/hadoop<br />cat /usr/local/addToBash >> ~/.bashrc<br /></pre><p> This had to be done on each of the seven working machines. They each had different RAM and hard disk amounts, with skipper and stacie being the best and barbie and ken being the worst.</p><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-qNgeAOJanSY/VbWUclEdoeI/AAAAAAAAEHw/WLnnP2yBb70/s1600/CAM00241.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-qNgeAOJanSY/VbWUclEdoeI/AAAAAAAAEHw/WLnnP2yBb70/s400/CAM00241.png" /></a></div><p> I changed the /etc/hosts on every machine so that each machine could recognize each other by name.</p><pre><br />10.0.0.9        barbie<br />10.0.0.10       kelly<br />10.0.0.13       skipper<br />10.0.0.14       stacie<br />10.0.0.16       ken<br />10.0.0.17       christie<br />10.0.0.18       midge<br /></pre><p> I decided to make skipper the master, Each machine needs to let the master connect by ssh without a password so I copied Skipper's rsa key made in the initial setup using</p><pre><br />ssh-copy-id -i ~/.ssh/id_rsa.pub remote-host<br /></pre><p> Where remote-host had to be changed to every machine I wanted to connect to. Finally, skipper's slaves file (etc/hadoop/slaves) needed to have each machine added to it (including herself so she would do some work too instead of just running as the NameNode).</p><pre><br />barbie<br />kelly<br />skipper<br />stacie<br />ken<br />christie<br />midge<br /></pre><h4>In all honesty...</h4><p> I screwed this up about a dozen times before getting it to work, but every mistake was something well-documented with solutions on the web. The best trick I learned was to delete the datanode temporary file on each machine whenever I screwed things up. In my setup that would be done like this.</p><pre><br />rm -r /usr/local/hadoop/datanode<br /></pre><h4>And Finally</h4><p> I was finally able to load a few documents into the hdfs and run the wordcount on them across all machines. Overall, I feel extremely satisfied getting this done finally (though I've got a much more <a href="http://spark.apache.org/">sophisticated system</a> at my disposal at the cluster <a href="https://rcc.uchicago.edu/">where I work</a>). Now I'm just getting ready to try it out on one of my pet projects!</p><br /></div></div><ul class="post__social"><li><a href="https://www.facebook.com/sharer/sharer.php?u=https://bonkerfield.org/2015/07/26/the-barbie-hadoop-cluster-multi-node/" target="_blank"><i class="fa fa-facebook"></i></a></li><li><a href="https://twitter.com/intent/tweet?&text=The Barbie Hadoop Cluster (Multi-Node Cluster)+https://bonkerfield.org/2015/07/26/the-barbie-hadoop-cluster-multi-node/+by+Will Stedden" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="https://plus.google.com/share?url=https://bonkerfield.org/2015/07/26/the-barbie-hadoop-cluster-multi-node/" target="_blank"><i class="fa fa-google-plus"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?mini=true&source=The Barbie Hadoop Cluster (Multi-Node Cluster)&summary=&url=https://bonkerfield.org/2015/07/26/the-barbie-hadoop-cluster-multi-node/" target="_blank"><i class="fa fa-linkedin"></i></a></li><li><a href="https://www.stumbleupon.com/badge/?url=https://bonkerfield.org/2015/07/26/the-barbie-hadoop-cluster-multi-node/" target="_blank"><i class="fa fa-stumbleupon"></i></a></li><li><a href="https://www.reddit.com/submit?url=https://bonkerfield.org/2015/07/26/the-barbie-hadoop-cluster-multi-node/" target="_blank"><i class="fa fa-reddit-alien"></i></a></li><li><a href="https://www.tumblr.com/share/link?url=https://bonkerfield.org/2015/07/26/the-barbie-hadoop-cluster-multi-node/" target="_blank"><i class="fa fa-tumblr"></i></a></li><li><a href="https://www.pinterest.com/pin/create/link/?description=&media=http://2.bp.blogspot.com/-XGwAxKreBtw/VbWKR9SptdI/AAAAAAAAEHU/FgdjpgyQkKM/CAM00240.jpg&url=https://bonkerfield.org/2015/07/26/the-barbie-hadoop-cluster-multi-node/" target="_blank"><i class="fa fa-pinterest"></i></a></li></ul></div></div><div class="section-padding--none"><div class="grid"><hr class="sep"/></div></div><div class="section-padding"><div class="grid-small"> <span class="post__author">Posted by <a href="http://hellowill.bonkerfield.org" title="More By Will Stedden">Will Stedden</a></span><p class="post__bio">typical wannabe polymath</p></div></div></article></div><section class="related section-padding"><div class="grid-xlarge"><h2 class="related__title">Related</h2><div class="related__container"><article class="related__post"> <a class="related__link" href="https://bonkerfield.org/2019/04/03/visualizing-shared-budgets-and-dividing/"><figure class="related__img"> <img src="https://1.bp.blogspot.com/-_tf3KY6IKew/XJsCuBf0TGI/AAAAAAAADmg/hP2k6zaGSokoPBK_4Vhn2Svv2bjpIdz1wCLcBGAs/Screen%2BShot%2B2019-03-26%2Bat%2B9.57.17%2BPM.png" alt="Visualizing shared budgets and dividing up household expenses fairly"/></figure><div><h2 class="related__text">Visualizing shared budgets and dividing up household expenses fairly</h2></div></a></article><article class="related__post"> <a class="related__link" href="https://bonkerfield.org/2017/07/29/experiences-with-crowdsourcing-analysis/"><figure class="related__img"> <img src="https://3.bp.blogspot.com/-1IVZ3gQl6Mw/WWLffNqxr2I/AAAAAAAAIrw/rqxcHrOLbiUboUlFBuNVThYCCp9J1y6VQCLcBGAs/WPS%2BDiscipline.png" alt="Analyzing Edge.org forum data - Experiences with Crowdsourcing Analysis"/></figure><div><h2 class="related__text">Analyzing Edge.org forum data - Experiences with Crowdsourcing Analysis</h2></div></a></article><article class="related__post"> <a class="related__link" href="https://bonkerfield.org/2016/10/12/text-mining-and-natural-language/"><figure class="related__img"> <img src="https://4.bp.blogspot.com/-eDtnSA_LrOk/V_6IY2EOMLI/AAAAAAAAHDE/cqVsQMqK4PQT5H720zmOrH-3aw-R6Tw8wCLcB/png%253Bbase64de1231217d364075.png" alt="Text Mining and Natural Language Processing on Health Forums"/></figure><div><h2 class="related__text">Text Mining and Natural Language Processing on Health Forums</h2></div></a></article></div></div></section></main><footer class="footer section-padding"><div class="grid"><div class="subscribe" id="subscribe"><div class="subscribe__container"> <span class="subscribe__title">Subscribe</span><p class="subscribe__text">Get an update when I post new content.</p><form method="POST" action="https://bonkerfield.us4.list-manage.com/subscribe/post-json?u=68d1146ea8fe327def203f254&amp;id=e88ba623c5&amp;c=?" id="mc-signup" name="mc-embedded-subscribe-form" novalidate><div style="position: absolute; left: -5000px;" aria-hidden="true"> <input type="text" name="b_68d1146ea8fe327def203f254_e88ba623c5" tabindex="-1" value=""></div><div class="form-group"> <input id="mce-EMAIL" type="email" name="EMAIL" placeholder="Email Address"></div><div class="form__btn"> <input id="mc-submit" type="submit" value="Sign Up" name="subscribe"></div></form><p class="subscribe__error hidden"></p></div></div><hr class="sep--white"/><div class="footer__container"><ul class="footer__social"><li><a href="https://twitter.com/willstedden" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="https://www.instagram.com/" target="_blank"><i class="fa fa-instagram"></i></a></li><li><a href="https://www.linkedin.com/in/willstedden" target="_blank"><i class="fa fa-linkedin"></i></a></li><li><a href="https://github.com/stedn" target="_blank"><i class="fa fa-github"></i></a></li><li><a href="https://codepen.io/stedn/" target="_blank"><i class="fa fa-codepen"></i></a></li></ul><div class="posts__pagination"> <span>All content on this blog is free to use under a creative commons <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a> license</span></div><div class="widget-content"> <form style="text-align:center" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" style="width:10%"> <input type="hidden" name="cmd" value="_s-xclick"> <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7----- "> <input type="submit" value="contribute to cool stuff" name="submit" style="width:25%;"> </form></div></div></div></footer><section class="contact popup"><div class="popup__close"><div class="popup__exit"></div></div><div class="contact__container popup__container"><div class="contact__img"><figure class="absolute-bg" style="background-image: url(/assets/images/octopus.jpeg);"></figure></div><div class="contact__content"><div class="contact__mast section-padding--half"><div class="grid"><h2>Contact</h2></div></div><div class="section-padding--none"><hr class="sep"/></div><div class="contact__form section-padding--half"><div class="grid-xlarge"> <form id="form" class="form" action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSctE1VauB_r8xR0tsfPas21pTUqKg-5vC8zXgl_eRjJW2FP_g/formResponse" method="POST"><div class="form__subcontainer"><div> <label for="form-first-name">first name</label> <input type="text" name="entry.1565830609" id="form-first-name" required></div><div> <label for="form-last-name">last name</label> <input type="text" name="entry.1397370877" id="form-last-name" required></div></div><div> <label for="form-email">email</label> <input type="email" name="entry.644994945" id="form-email" required></div><div> <label for="form-message">message</label> <textarea name="entry.918842698" id="form-message" rows="3"></textarea></div><div class="form__submit"><div class="form__btn"> <input type="submit" value="Send"></div></div><p class="form__message"></p></form></div></div></div></div></section><script src="/assets/js/app.min.js"></script></body></html>
  